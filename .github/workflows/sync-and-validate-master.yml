name: Sync and validate master branch on Arm64 Windows

on:
  workflow_dispatch:
  schedule:
    - cron: "0 3 * * *"

jobs:
  sync-fork:
    name: Sync master
    runs-on: ubuntu-latest

    steps:
      - run: gh repo sync -b master
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          REPO: Windows-on-ARM-Experiments/openssl

  validate-arm64-windows:
    name: Valitate the latest Arm64 Windows build
    needs: sync-fork
    uses: ./.github/workflows/ci-arm64.yml
    with:
      branch: master
